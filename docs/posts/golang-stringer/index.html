<!doctype html><html lang=en data-mode=dark><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.82.1"><meta name=theme content="Color Your World -- gitlab.com/rmaguiar/hugo-theme-color-your-world"><title>Using Golang's Stringer tool | ಅರ್ಜುನ್ ಮಹಿಷಿ</title><meta name=author content="Arjun Mahishi"><meta name=robots content="index follow"><meta name=referrer content="no-referrer-when-downgrade"><link rel=canonical href=https://example.com/posts/golang-stringer/><meta property="og:site_name" content="ಅರ್ಜುನ್ ಮಹಿಷಿ"><meta property="og:title" content="Using Golang's Stringer tool"><meta property="og:url" content="https://example.com/posts/golang-stringer/"><meta property="og:type" content="article"><meta property="article:published_time" content="2020-01-28"><meta property="article:modified_time" content="2020-01-28"><meta property="og:updated_time" content="2020-01-28"><meta name=twitter:creator content="@arjunmahishi"><meta name=twitter:site content="@arjunmahishi"><meta name=twitter:dnt content="on"><meta name=theme-color content="#222"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="default"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebSite","@id":"https:\/\/example.com\/"},"headline":"Using Golang's Stringer tool","description":"","url":"https:\/\/example.com\/posts\/golang-stringer\/","inLanguage":"en","datePublished":"2020-01-28","dateModified":"2020-01-28","wordCount":"1070","publisher":{"@type":"Person","name":"Arjun Mahishi"},"author":{"@type":"Person","name":"Arjun Mahishi","description":"Software engineer","sameAs":["https://github.com/arjunmahishi","https://www.instagram.com/arjunmahishi","https://www.linkedin.com/in/arjun-mahishi-b18968126","https://medium.com/@arjunmahishi","https://twitter.com/arjunmahishi","https://youtube.com/channel/UC9eTgNyhtPaVf7h-YEo-R2w"]}}</script><link rel=stylesheet href=/css/main.min.css><noscript><meta name=theme-color content="#1dbc91"><style>html{--accent:#1dbc91}.req-js{display:none}</style></noscript><link rel=preload href=/fonts/open-sans-v17-latin-700.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-700.woff2 as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-italic.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-italic.woff2 as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-regular.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/open-sans-v17-latin-regular.woff2 as=font crossorigin=anonymous><link rel=preload href=/fonts/oswald-v29-latin-700.woff as=font crossorigin=anonymous><link rel=preload href=/fonts/oswald-v29-latin-700.woff2 as=font crossorigin=anonymous><link rel=me href=https://github.com/arjunmahishi><link rel=me href=https://www.instagram.com/arjunmahishi><link rel=me href=https://www.linkedin.com/in/arjun-mahishi-b18968126><link rel=me href=https://medium.com/@arjunmahishi><link rel=me href=https://twitter.com/arjunmahishi><link rel=me href=https://youtube.com/channel/UC9eTgNyhtPaVf7h-YEo-R2w><script>'use strict';const ROOT=document.documentElement,SHEET=document.documentElement.style,META_THEME_COLOR=document.querySelector('meta[name=theme-color]');function setDark(){ROOT.dataset.mode='dark'}function setLight(){ROOT.dataset.mode='light'}localStorage.getItem('isDark')=='true'?setDark():localStorage.getItem('isDark')=='false'&&setLight();function getAccent(){var a;return ROOT.dataset.mode==='dark'?localStorage.getItem('darkAccent')===null?(a="#1dbc91"):(a=localStorage.getItem('darkAccent')):ROOT.dataset.mode==='light'&&(localStorage.getItem('lightAccent')===null?(a="#225670"):(a=localStorage.getItem('lightAccent'))),a}var activeAccent=getAccent();SHEET.setProperty('--accent',activeAccent),META_THEME_COLOR.setAttribute('content',activeAccent);function updateAccent(){var a=getAccent();SHEET.setProperty('--accent',a),PALETTE.value=a,META_THEME_COLOR.setAttribute('content',a)}document.addEventListener('DOMContentLoaded',function(){PALETTE.value=activeAccent;function a(){document.body.style.transition=document.querySelector('header').style.transition=document.querySelector('footer').style.transition='background-color .3s ease, color .3s ease'}function b(){a(),ROOT.dataset.mode=='light'?(setDark(),localStorage.setItem('isDark','true')):(setLight(),localStorage.setItem('isDark','false')),updateAccent()}document.querySelector('footer button').addEventListener('click',b)})</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-41041173-4','auto'),ga('send','pageview'))</script></head><body><header><a href=/>ಅರ್ಜುನ್ ಮಹಿಷಿ</a><nav aria-label="Main menu."><ul><li><a class=btn href=https://www.youtube.com/channel/UC9eTgNyhtPaVf7h-YEo-R2w>Music</a></li><li><a class=btn href=/posts>Blog posts</a></li><li><a class=btn href=/vim-adventures>vim-adventures</a></li></ul></nav></header><div class=filler><main><article><header><h1>Using Golang's Stringer tool</h1><section class=terms><ul><li><a class=btn href=/tags/golang/>golang</a></li><li><a class=btn href=/tags/good-practices/>good-practices</a></li><li><a class=btn href=/tags/tools/>tools</a></li></ul></section><p>Published on <time datetime=2020-01-28>2020-01-28</time></p></header><p><strong>Straight from the documentation:</strong></p><blockquote><p>Stringer is a tool to automate the creation of methods that satisfy the fmt.Stringer interface. Given the name of a (signed or unsigned) integer type T that has constants defined, stringer will create a new self-contained Go source file implementing:</p><h1 id=func-t-t-string-string>func (t T) String() string</h1><p>The file is created in the same package and directory as the package that defines T. It has helpful defaults designed for use with go generate.</p></blockquote><p>Stringer is among other Golang tools which help us in writing good go code. This is a CLI tool which is used via <code>go generate</code>. Go generate is another tool that comes with go. It is used for auto-generating code. You can explore more about it <a href=https://golang.org/pkg/cmd/go/internal/generate/ target=_blank rel=noreferrer>in their documentation</a>.</p><p>So, we use the stringer command with go generate to generate the code necessary to implement fmt’s stringer interface. Conceptually this is very simple. But the documentation for stringer is, well there is no documentation. There is only a help flag in the stringer command which only lists the available flags we can use with stringer. These flags are very useful but are ignored by many people. They give us control over how the final output string is formatted.</p><h2 id=what-stringer-is-used-for><a class=anchor href=#what-stringer-is-used-for title='Anchor for "What stringer is used for".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>What stringer is used for</h2><p>Stringer is generally used to implement the concept of enumeration while avoiding hard-coding of the string values. Enumeration or enum is when you want to define a finite and fixed set of values of a given type. For example, types of dishes in a menu (appetizers, main course, desserts), types of pokemon (grass, water, fire, ..), etc.</p><p>So, when we want to use these defined sets of values, we should avoid hard coding them as it can lead to human errors like spelling mistakes. If we use something like stringer, we will generate the values once and make sure there are no errors. After that, we can just use them without worrying about human errors.</p><h2 id=hands-on><a class=anchor href=#hands-on title='Anchor for "Hands-on".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>Hands-on</h2><p>The types that we define as enums will be extending <code>int</code>. So, when we declare the variables for each element, they will hold <code>int</code> values (value1 = 1, value2 = 2, etc). These <code>int</code> values will be used by stringer internally to index the values. But, we don’t have to manually initialise the <code>int</code> value for each of the elements. Go provides an identifier called <code>iota</code> to incrementally initialise <code>int</code> values. Let’s look at an example for <code>iota</code>.</p><p>type Sample int</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-go data-lang=go><span class=kd>const</span> <span class=p>(</span>
	<span class=nx>value1</span> <span class=nx>Sample</span> <span class=p>=</span> <span class=kc>iota</span>
	<span class=nx>value2</span>
	<span class=nx>value3</span>
	<span class=nx>value4</span>
<span class=p>)</span>

<span class=c1>// or if you want the values
</span><span class=c1>// to start from 1
</span><span class=c1></span>
<span class=kd>const</span> <span class=p>(</span>
	<span class=nx>value5</span> <span class=nx>Sample</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span>
	<span class=nx>value6</span>
	<span class=nx>value7</span>
	<span class=nx>value8</span>
<span class=p>)</span>
</code></pre></div><p>Let&rsquo;s go over each of the flags stringer has and see how they can be used with some examples.</p><h3 id=-type><a class=anchor href=#-type title='Anchor for "-type".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>-type</h3><p><code>-type</code> is a compulsory argument which defines which type the string belongs to. This argument also supports a list of comma-separated type names. The <code>String()</code> method will be generated for all the given types. But this method’s definition will be put in a separate file. This file will by default be named <code>&lt;type>_string.go</code> . Let’s look at an example for the <code>-type</code> :</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>HeroType</span> <span class=kt>int</span>
<span class=kd>type</span> <span class=nx>AttackType</span> <span class=kt>int</span>

<span class=kd>const</span> <span class=p>(</span>
	<span class=nx>Strength</span> <span class=nx>HeroType</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span>
	<span class=nx>Agility</span>
	<span class=nx>Intelligence</span>
<span class=p>)</span>

<span class=kd>const</span> <span class=p>(</span>
	<span class=nx>Melee</span> <span class=nx>AttackType</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span>
	<span class=nx>Ranged</span>
<span class=p>)</span>

<span class=c1>//go:generate stringer -type=HeroType,AttackType
</span></code></pre></div><p>Both the String() definitions will be put in a single file called herotype_string.go . If we want them to be in separate files, we will need to have two go generate comments like this:</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-go data-lang=go><span class=c1>//go:generate stringer -type=HeroType
</span><span class=c1>//go:generate stringer -type=AttackType
</span></code></pre></div><p>This will create two files: <code>herotype_string.go</code> and <code>attacktype_string.go</code> . To generate these files, we need to run the command <code>go generate</code> in the same directory. This will create the files. And every time we run go generate , these files will be regenerated. So, it is important that we do not edit these generated files manually as they will get overwritten.</p><h3 id=-output><a class=anchor href=#-output title='Anchor for "-output".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>-output</h3><p><code>-output</code> flag is used to explicitly specify the name of the file what will be generated. This will override the default name <code>&lt;type>_string.go</code> . That’s pretty much all this flag does. So, for the above example, if we wanted to put both the type’s generations into a single file called <code>hero-attack_string.go</code>, we can use the <code>-output</code> flag like this:</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-go data-lang=go><span class=c1>//go:generate stringer -type=HeroType,AttackType -output=hero-attack_string.go
</span></code></pre></div><p>This will generate the single <code>hero-attack_string.go</code> with both the <code>String()</code> definitions.</p><h3 id=-trimprefix><a class=anchor href=#-trimprefix title='Anchor for "-trimprefix".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>-trimprefix</h3><p>Sometimes, we would want to name the enum variables descriptively with a prefix, to make the code more readable (Ex: <code>HeroTypeAgility</code> instead of just <code>Agility</code>). But this exact name would get reflected in the final output string. We can use the <code>-trimprefix</code> to avoid this and trim the prefix before generating the final string output. This will trim the specified prefix and only use the rest of the text as the value.</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>HeroType</span> <span class=kt>int</span>

<span class=c1>//go:generate stringer -type=HeroType -trimprefix=HeroType
</span><span class=c1></span><span class=kd>const</span> <span class=p>(</span>
    <span class=nx>HeroTypeStrength</span> <span class=nx>HeroType</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span>
    <span class=nx>HeroTypeAgility</span>
    <span class=nx>HeroTypeIntelligence</span>
<span class=p>)</span>
</code></pre></div><p>This will generate the <code>String()</code> function which return the above values with “HeroType” trimmed off: “Strength”, “Agility”, “Intelligence”</p><h3 id=-linecomment><a class=anchor href=#-linecomment title='Anchor for "-linecomment".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>-linecomment</h3><p>This flag, like <code>trimprefix</code> is also used for customising what the <code>String()</code> function returns.<code>trimprefix</code> only lets you trim of the prefix of the value, but this flag lets you set WHATEVER value you want to a particular object of that type. This custom value is set by adding a comment on the same line as the object, with the value you want to set. Example:</p><div class=highlight><pre class=chroma aria-label="Box containing code sample." tabindex=0><code class=language-go data-lang=go><span class=kd>type</span> <span class=nx>Artist</span> <span class=kt>int</span>

<span class=c1>//go:generate stringer -type=Artist -linecomment
</span><span class=c1></span><span class=kd>const</span> <span class=p>(</span>
    <span class=nx>ArtistLedZeppelin</span> <span class=nx>Artist</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span> <span class=c1>// led-zepplin
</span><span class=c1></span>    <span class=nx>ArtistPinkFloyd</span>                     <span class=c1>// pink-floyd
</span><span class=c1></span>    <span class=nx>ArtistPostMalone</span>                    <span class=c1>// post-malone
</span><span class=c1></span><span class=p>)</span>
</code></pre></div><p>This will generate enums with the values: “led-zeppelin”, “pink-floyd” and “post-malone”. This way, we can have “-” in the string value. <code>linecomment</code> is generally used in cases like this when we want to have special characters, start the value with a lower case, keep the variable camel-case and the values snake-case etc.</p><blockquote><p>NOTE: The comment has to be on the same line. And the space after // is ignored</p></blockquote><h3 id=-tags><a class=anchor href=#-tags title='Anchor for "-tags".'><svg aria-hidden="true"><use xlink:href="#hashtag"/></svg></a>-tags</h3><p>This flag is used to specify the build tags. These build tags are used for conditionally generate the <code>String()</code> function. I am not very sure about how to specifically use this. I tried to find out, but couldn’t find much online. If you know any examples, please comment below.</p><p>These are the flags available in <code>stringer</code>. This is a fairly simple tool to use. Hope this post give you more clarity about it.</p></article></main></div><footer><section class=req-js><button class=outline-dashed title="Change to light/dark mode."><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><use xlink:href="#adjust"/></svg></button><input class=outline-dashed type=color list=presets value=#1dbc91 title="Change accent color." aria-label="Change accent color."><datalist id=presets><option value=#225670><option value=#1dbc91><option value=#1f676b><option value=#f3a530><option value=#902b37><option value=#754e85><option value=#7fc121><option value=#a8314a><option value=#ff7433><option value=#3e6728><option value=#c063bd></datalist></section><noscript><p class=noscript>Unable to execute JavaScript. Some features were disabled.</p></noscript></footer><svg xmlns="http://www.w3.org/2000/svg" width="0" height="0" aria-hidden="true"><symbol viewBox="0 0 512 512" id="adjust"><path d="M8 256c0 136.966 111.033 248 248 248s248-111.034 248-248S392.966 8 256 8 8 119.033 8 256zm248 184V72c101.705.0 184 82.311 184 184 0 101.705-82.311 184-184 184z"/></symbol><symbol viewBox="0 0 448 512" id="hashtag"><path d="M440.667 182.109l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l14.623-81.891C377.123 38.754 371.468 32 363.997 32h-40.632a12 12 0 00-11.813 9.891L296.175 128H197.54l14.623-81.891C213.477 38.754 207.822 32 200.35 32h-40.632a12 12 0 00-11.813 9.891L132.528 128H53.432a12 12 0 00-11.813 9.891l-7.143 40C33.163 185.246 38.818 192 46.289 192h74.81L98.242 320H19.146a12 12 0 00-11.813 9.891l-7.143 40C-1.123 377.246 4.532 384 12.003 384h74.81L72.19 465.891C70.877 473.246 76.532 480 84.003 480h40.632a12 12 0 0011.813-9.891L151.826 384h98.634l-14.623 81.891C234.523 473.246 240.178 480 247.65 480h40.632a12 12 0 0011.813-9.891L315.472 384h79.096a12 12 0 0011.813-9.891l7.143-40c1.313-7.355-4.342-14.109-11.813-14.109h-74.81l22.857-128h79.096a12 12 0 0011.813-9.891zM261.889 320h-98.634l22.857-128h98.634l-22.857 128z"/></symbol><symbol viewBox="0 0 320 512" id="caret-down"><path d="M31.3 192h257.3c17.8.0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3.0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z"/></symbol></svg><script>'use strict';const PALETTE=document.querySelector('footer input');PALETTE.onchange=function(){const a=PALETTE.value;SHEET.setProperty('--accent',a),ROOT.dataset.mode==='light'?localStorage.setItem('lightAccent',a):localStorage.setItem('darkAccent',a),updateAccent()}</script></body></html>